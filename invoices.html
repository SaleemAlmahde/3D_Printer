<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Printer - ุงูููุงุชูุฑ</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.min.css" />
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/invoices.css">
    
    <!-- JavaScript Files -->
    <script src="assets/java/data.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="assets/java/invoiceCodec.js"></script>
    <!-- <script src="assets/java/script2.js"></script> -->
</head>
<body>
    <!-- Nav Section -->
    <nav>
        <div class="nav-logo">
            <img src="assets/imgs/logo.jpg" alt="logo">
            <h2>3D Printer</h2>
        </div>

        <div class="container">
            <ul class="nav-menu">
                <a href="index.html"><li>ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</li></a>
                <a href="invoices.html"><li>ุงูููุงุชูุฑ</li></a>
                <a href="cart.html"><li>ุงูุณูุฉ</li></a>
                <a href="stores.html"><li>ุงููุชุงุฌุฑ</li></a>
            </ul>
        </div>
    </nav>    

    <section id="invoicesSection">
    <div class="container">
        <h2>ุงูููุงุชูุฑ</h2>
        <div class="search-container">
    <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ููุชุฌ..." onkeyup="searchInvoices()">
    <i class="fa fa-search"></i>
</div>
        <div id="invoices"></div>
    </div>
</section>

<!-- ุฒุฑ ุฅุถุงูุฉ ูุงุชูุฑุฉ -->
<button id="addInvoiceBtn" class="add-invoice-btn" onclick="openNewInvoiceModel()">ุฅุถุงูุฉ ูุงุชูุฑุฉ</button>

<!-- ุฒุฑ ุงุถุงูุฉ ูุงุชูุฑุฉ ุนุจุฑ ุงูููุฏ -->
<!-- <div id="invoice-code-tools">

  <button class="add-invoice-btn-code" onclick="toggleInvoiceCodeInput()">ุงุถู ูุงุชูุฑุฉ ุนุจุฑ ุงูููุฏ</button>
  <div id="invoiceCodeInputModal" class="hidden-code-input">
  <input id="pasteInvoiceCodeInput" placeholder="ุฃูุตู ููุฏ ุงููุงุชูุฑุฉ ููุง"></input>
    <button onclick="onPasteCode()">ุงุณุชูุฑุงุฏ ุงูููุฏ (ููุชุญ ุงูููุฏุงู ุฃู ูุญูุธ)</button>
</div>
</div> -->

<!-- Modal -->
    <div id="newInvoiceOverlay" class="hidden" onclick="closeModal()"></div>

    <div id="newInvoiceModal" class="hidden">
        <div class="modal-content">
        <span class="close-btn" onclick="closeModal()">&times;</span>
        <button id="deleteInvoiceBtn" class="delete-btn hidden" type="button" onclick="showDeleteConfirm()">
          <i class="fa fa-trash"></i>
        </button>
    <h2>ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</h2>
    <form id="invoiceForm">
      <input type="text" id="buyerName" placeholder="ุงุณู ุงููุดุชุฑู" required>
      <input type="text" id="buyerPhone" placeholder="ุฑูู ุงููุงุชู" required>
      <input type="text" id="buyerProvince" placeholder="ุงููุญุงูุธุฉ" required>
  <!-- ุญูู ุชุงุฑูุฎ ุงูุชุณููู (ุงุฎุชูุงุฑู) -->
  <input type="date" id="deliveryDate" placeholder="ุชุงุฑูุฎ ุงูุชุณููู">
      
      <!-- ุทุฑููุฉ ุงูุชุณููู -->
      <div class="form-group">
        <label>ุทุฑููุฉ ุงูุชุณููู:</label>
        <select id="deliveryType" onchange="toggleShippingFields()" required>
          <option value="">-- ุงุฎุชุฑ ุทุฑููุฉ ุงูุชุณููู --</option>
          <option value="local">ุถูู ุญูุต</option>
          <option value="shipping">ุดุญู</option>
        </select>
      </div>

      <!-- ุญููู ุงูุดุญู (ุชุธูุฑ ุนูุฏ ุงุฎุชูุงุฑ ุงูุดุญู) -->
      <div id="shippingFields" class="hidden">
        <!-- ุญููุงู ุนูุฏ ุงุฎุชูุงุฑ ุงูุดุญู: ุดุฑูุฉ ุงูุดุญู + ูุนูููุงุช ุงูุดุญู -->
        <input type="text" id="shippingCompany" placeholder="ุดุฑูุฉ ุงูุดุญู">
        <input type="text" id="shippingInfo" placeholder="ูุนูููุงุช ุงูุดุญู">
      </div>

      <!-- ุญูู ุงููููุน (ูุธูุฑ ุนูุฏ ุงุฎุชูุงุฑ ุถูู ุญูุต) -->
      <div id="localFields" class="hidden">
        <input type="text" id="localShippingInfo" placeholder="ุงููููุน ุถูู ุญูุต">
      </div>

      <!-- ุงููุชุฌุฑ -->
      <div class="form-group">
        <label>ุงููุชุฌุฑ:</label>
        <select id="linkedStores" onchange="handleStoreSelection(this.value)">
          <option value="">-- ุงุฎุชุฑ ุงููุชุฌุฑ --</option>
        </select>
      </div>

      <!-- ๐งพ ุญูู ุงุฎุชูุงุฑ ุงูููุชุฌุงุช -->
      <div class="form-group product-select">
        <div class="product-select-header">
          <label>ุงูููุชุฌุงุช:</label>
          <button type="button" id="openProductsSheet" onclick="openAddProductSheet()">ุฅุถุงูุฉ ููุชุฌ +</button>
        </div>

        <!-- ูุงุฆูุฉ ุงูููุชุฌุงุช ุงููุฎุชุงุฑุฉ -->
        <div id="selectedProductsList"></div>
      </div>

        <!-- ุญุงูุฉ ุงูุฏูุน ูุงููุจูุบ ุงููุฏููุน (ุงุฎุชูุงุฑู) -->
        <div class="form-group payment-section">
          <label>ุญุงูุฉ ุงูุฏูุน:</label>
          <select id="paymentStatus" onchange="togglePaymentFields()">
            <option value="unpaid">ูู ูุฏูุน</option>
            <option value="paid-full">ุฏููุน ูุงูู</option>
            <option value="paid-partial">ุฏููุน ุฌุฒุฆู</option>
          </select>
          <input type="number" id="paymentAmountPaid" class="hidden" placeholder="ุฃุฏุฎู ุงููุจูุบ ุงููุฏููุน (ู.ุณ)" min="0">
        </div>

        <!-- ุญูู ุงูููุงุญุธุงุช (ูุต ุญุฑุ ูุฏ ูููู ูุงุฑุบูุง) - ูุธูุฑ ุจุฌุงูุจ ุงูุนููุงู ููุชูุงุณุจ ูุน ุจููุฉ ุงูุญููู -->
        <div class="form-group notes">
          <label>ููุงุญุธุงุช (ุงุฎุชูุงุฑู):</label>
          <textarea id="invoiceNotes" placeholder="ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ ุชุธูุฑ ูู ุงููุงุชูุฑุฉ" rows="3"></textarea>
        </div>

      <!-- ุฅุธูุงุฑ ุงูุฅุฌูุงูู ุจุดูู ุขูู -->
      <div class="form-group totals">
        <div class="total-item">
          <label>ุงูุฅุฌูุงูู (ู.ุณ):</label>
          <span id="totalSYP">0</span>
        </div>
        <div class="total-item">
          <label>ุงูุฅุฌูุงูู ($):</label>
          <span id="totalUSD">0</span>
        </div>
      </div>

      <button type="button" class="save-invoice-btn" onclick="saveInvoice()">ุญูุธ ุงููุงุชูุฑุฉ</button>
    </form>
  </div>
    </div>

<!-- Overlay ููุดูุช -->
<div id="productSheetOverlay" class="hidden" onclick="closeAddProductSheet()"></div>

<!-- ุชุฃููุฏ ุงูุญุฐู ุงููุฎุตุต -->
<div id="confirmOverlay" class="hidden" onclick="cancelDelete()"></div>
<div id="confirmModal" class="hidden">
  <div class="confirm-modal-content">
    <h3>ุชุฃููุฏ ุงูุญุฐู</h3>
    <p id="confirmModalMessage">ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐู ุงููุงุชูุฑุฉุ</p>
    <div class="confirm-buttons">
      <button type="button" class="btn-cancel" onclick="cancelDelete()">ุฅูุบุงุก</button>
      <button type="button" class="btn-confirm" onclick="confirmDelete()">ุชุฃููุฏ ุงูุญุฐู</button>
    </div>
  </div>
</div>

<!-- Bottom Sheet -->
<div class="bottom-sheet" id="addProductSheet">
  <div class="bottom-sheet-content">
    <h3>ุฅุถุงูุฉ ููุชุฌ</h3>

    <!-- ๐น ุญูู ุงูุจุญุซ ูุงูุงุฎุชูุงุฑ ูู ููุณ ุงููุฑุจุน -->
    <div class="custom-select">
      <input
        type="text"
        id="productInput"
        placeholder="ุงุจุญุซ ุฃู ุงุฎุชุฑ ููุชุฌ..."
        readonly
        onclick=""
      >
      <div class="dropdown-list hidden" id="productDropdown">
    </div>

    <!-- ุงููููุฉ -->
    <input type="number" id="productQuantity" placeholder="ุงููููุฉ" min="1">

    <!-- ุงูุฃุฒุฑุงุฑ -->
    <div class="bottom-sheet-buttons">
      <button type="button" onclick="closeAddProductSheet()">ุฅูุบุงุก</button>
      <button type="button" onclick="confirmAddProduct()">ุฅุถุงูุฉ</button>
    </div>
  </div>
</div>

   <button id="scrollTopBtn" onclick="scrollToTop()"><i class="fa fa-arrow-up"></i></button>

    <div class="fab-container">
    
    <div id="fabSpeedDial" class="fab-menu hidden">
        <button id="resetFabBtn" class="fab-item hidden" onclick="resetFilters()">
            <i class="fa fa-close"></i>
            <span>ุงูุบุงุก ุงูููุชุฑุฉ</span>
        </button>

        <button id="openFilterModalBtn" class="fab-item" onclick="openFilterModal()">
            <i class="fa fa-filter"></i>
            <span>ุชุตููุฉ ูุนุฑุถ</span>
        </button>
        
        <button id="addByCodeBtn" class="fab-item" onclick="toggleCodeInputPopup(event)">
            <i class="fa fa-code"></i>
            <span>ุฅุถุงูุฉ ุนุจุฑ ุงูููุฏ</span>
        </button>
        
        <button id="addNewInvoiceBtn" class="fab-item" onclick="openNewInvoiceModel()">
            <i class="fa fa-plus"></i>
            <span>ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</span>
        </button>
    </div>

    <button id="mainFab" class="fab-main" onclick="toggleFabMenu()">
        <i class="fa fa-plus"></i> 
    </button>
    
    <div id="codeInputPopup" class="code-popup hidden">
        <input id="pasteInvoiceCodeInput" placeholder="ุฃูุตู ููุฏ ุงููุงุชูุฑุฉ ููุง"/>
        <button onclick="onPasteCode(); closeCodeInputPopup()">ุงุณุชูุฑุงุฏ ุงูููุฏ</button>
    </div>
</div>
<div id="filterModal" class="modal hidden">
    <div class="modal-content bottom-sheet">
        <h2>๐ ุฎูุงุฑุงุช ุงูุชุตููุฉ ูุงูุชุฑุชูุจ</h2>
        <hr>
        <div id="filterOptionsContainer">
            <label for="paymentFilter">ุญุงูุฉ ุงูุฏูุน:</label>
            <select id="paymentFilter" class="full-width-select">
                <option value="all">ุงููู</option>
                <option value="unpaid">ุบูุฑ ูุฏููุน</option>
                <option value="paid-partial">ุฏูุน ุฌุฒุฆู</option>
                <option value="paid-full">ูุฏููุน ุจุงููุงูู</option>
            </select>
            
            <label for="storeFilter">ุงููุชุฌุฑ:</label>
            <select id="storeFilter" class="full-width-select">
                <option value="all">ุฌููุน ุงููุชุงุฌุฑ</option>
                </select>

            <label for="sortOption">ุงูุชุฑุชูุจ ุญุณุจ:</label>
            <select id="sortOption" class="full-width-select">
                <option value="date_desc">ุชุงุฑูุฎ ุงูุฅุถุงูุฉ (ุงูุฃุญุฏุซ)</option>
                <option value="date_asc">ุชุงุฑูุฎ ุงูุฅุถุงูุฉ (ุงูุฃูุฏู)</option>
                <option value="total_desc">ูููุฉ ุงููุงุชูุฑุฉ (ุงูุฃุนูู)</option>
                <option value="remaining_desc">ุงููุจูุบ ุงููุชุจูู (ุงูุฃุนูู)</option>
            </select>
        </div>

        <div class="modal-actions">
            <button class="btn btn-primary" onclick="applyFiltersAndSort()">ุชุทุจูู ุงูููุงุชุฑ</button>
            <button class="btn btn-secondary" onclick="closeFilterModal()">ุฅุบูุงู</button>
        </div>
    </div>
</div>

<div id="filterOverlay" class="overlay hidden"></div>

    <script src="assets/java/script2.js"></script>


</body>
</html>